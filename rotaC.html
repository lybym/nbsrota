<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>rotaC</title>
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet" href="css/rotaC.css?v=1">
<script src="libs/jquery/3.3.1/jquery.min.js"></script>
<script src="libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="libs/jqueryui/datepicker-zh-CN.js"></script>
<script src="libs/funclibs.js?v=1"></script>
<style>


</style>

<script>

</script>
</head>

<body>
    <div id="rota_record_title">

    </div>
    <div id="rota_record">
        
    </div>

<script>
for(weeknum=1;weeknum<=7;weeknum++){
    $("#rota_record").append('<ul class="rota-record" id="rota_record_' + weeknum + '"></ul>');
    $('#rota_record_' + weeknum).append('<li class="rota-record-date" id="date_' + weeknum + '">day</li>');
    $('#rota_record_' + weeknum).append('<li class="rota-record-week" id="week_' + weeknum + '">week</li>');
    $('#rota_record_' + weeknum).append('<li class="rota-record-time" id="time_' + weeknum + '">time</li>');
    $('#rota_record_' + weeknum).append('<li class="rota-record-duty" id="duty_' + weeknum + '"></li>');
    for(row=0;row<4;row++){
        $('#duty_' + weeknum).append('<ul class="rota-record-duty-row" id="cont_' + weeknum + '_' + row + '"></ul>');
        for(col=0;col<4;col++){
            $('#cont_' + weeknum +'_' + row).append('<input class="rota-record-duty-col" id="cont_' + weeknum + '_' + row + '_' + col + '">');
        }
    }
    $('#rota_record_' + weeknum).append('<li class="rota-record-others" id="other_' + weeknum + '">others</li>');
}

var sdateid=1184;var edateid=1190;
var allrotainfo;
var dayinfo;
var nameinfo;
var dutyinfo;
$.getJSON('getrotainfo.php', {'sdateid': sdateid, 'edateid': edateid}, function(data) {
    allrotainfo=data;
    dayinfo=allrotainfo.dayinfo;
    nameinfo=allrotainfo.nameinfo;
    dutyinfo=allrotainfo.dutyinfo;
    //console.log(nameinfo);
    
    var name_source=[];
    Object.keys(nameinfo).forEach(function(nameid){//
        var name=nameinfo[nameid].renming;
        name_source.push(name);
    });
    console.log(name_source);

    $(".rota-record-duty-col").autocomplete({
        source: name_source
    });
});

</script>
</body>
</html>